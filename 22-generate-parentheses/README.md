## [Generate Parentheses](https://leetcode.com/problems/generate-parentheses/)

对于n对括号，在2n个位置种选择n个为左括号，其余为右括号，故有$C_{2n}^n$种可能。但是其中well-formed正确配对的只有一部分。

问题的求解依赖于子问题，且子问题重叠，是一个动态规划问题。

首先对于n，n的解包含两个部分，一个是若干个子问题的解的合并$p_n$，如"()()"，一部分是不可划分为子问题的解的合并$u_n$，如"(())"。

对应$p_n$，我们可以认为划分得到的是子问题的不可划分解，否则可以将该子问题划分，得到新的划分方式。故$p_n$的求解就是找到n的不同划分，再求解每个划分的不可划分解，最后合并。

而对于$u_n$的任意一个解，我们去掉最左的"("和最右的")"，则余下的即是n-1的解（即余下的n-1对括号是正确配对的），否则必可以找到一个位置，从开头到该位置多出一个")"，此时与去掉的"("可以构成一个正确匹配的子问题的解，且余下的也构成另一个子问题的解（否则整体不是正确配对的），与整体不可划分为子问题是矛盾的。

同理，n-1问题的解（包括$u_{n-1}$和$p_{n-1}$）在最左和最右分别加上"("和")"即可构成n的一个不可划分解，若可划分，则可证明中间的n-1对括号不是正确配对的（从开始到划分位置多一个")"）。

从而，$u_n$即是将$u_{n-1}$和$p_{n-1}$左右加上括号即可。

以上得到了n的可划分和不可划分解的递归方式。


解完之后发现递归的答案真心巧妙。